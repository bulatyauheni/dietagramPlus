package bulat.diet.helper_sport.activity;

import java.text.DecimalFormat;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Date;
import java.util.List;
import java.util.Locale;
import java.util.TreeSet;

import com.jjoe64.graphview.GraphView;
import com.jjoe64.graphview.GraphViewSeries;
import com.jjoe64.graphview.LineGraphView;
import com.jjoe64.graphview.GraphView.GraphViewData;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.Color;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TextView;
import bulat.diet.helper_sport.R;
import bulat.diet.helper_sport.adapter.DaysAdapter;
import bulat.diet.helper_sport.adapter.NotificationsAdapter;
import bulat.diet.helper_sport.db.NotificationDishHelper;
import bulat.diet.helper_sport.db.TodayDishHelper;
import bulat.diet.helper_sport.item.Day;
import bulat.diet.helper_sport.item.NotificationDish;
import bulat.diet.helper_sport.utils.SaveUtils;

public class NotificationActivity extends Activity {

	protected static final int DIALOG_CHART = 0;
	protected static final int DIALOG_WEIGHT = 1;
	TextView header;
	ListView notificationList;
	Cursor c ;
	int sum;
	
	@Override
	protected void onCreate(Bundle savedInstanceState) {		
		super.onCreate(savedInstanceState);					
		View viewToLoad = LayoutInflater.from(this).inflate(R.layout.notification_list, null);
		header = (TextView) viewToLoad.findViewById(R.id.textViewTitle);

		Button exitButton = (Button) viewToLoad.findViewById(R.id.buttonExit);
		exitButton.setOnClickListener(new OnClickListener() {
			
			public void onClick(View v) {
				// TODO Auto-generated method stub
				finish();
				System.exit(0);
			}
		});		
		setContentView(viewToLoad);
	}

	@Override
	protected void onDestroy() {
		// TODO Auto-generated method stub
		super.onDestroy();
		if(c!=null)
			c.close();
	}
	@Override
	protected void onPrepareDialog(int id, Dialog dialog) {
		Button buttonOk;
		Button nobutton;
		switch (id) {
		
		case DIALOG_CHART:		

			break;
		
		default:
			dialog = null;
		}
	}
	@Override
	protected Dialog onCreateDialog(int id) {
		final Dialog dialog;
		Button buttonOk;
		Button nobutton;
		switch (id) {
		case DIALOG_CHART:
			dialog = new Dialog(this.getParent());
			dialog.setContentView(R.layout.user_chart_dialog);
			dialog.setTitle(R.string.user_chart_dialog);
			break;
		
		default:
			dialog = null;
		}

		return dialog;
	}

	@Override
	protected void onPause() {
		// TODO Auto-generated method stub
		super.onPause();
		if(c!=null)
			c.close();
	}
	NotificationsAdapter da;
	@Override
	protected void onResume() {
		super.onResume();				
		header.setText(getString(R.string.tab_calendar_header));
		
		ArrayList<NotificationDish> list = NotificationDishHelper.getAllNotificationsList(this);
		if (list!=null){
			try {				
				da = new NotificationsAdapter(this, getApplicationContext(),R.layout.notification_list_row, list, this.getParent());
				
				notificationList = (ListView) findViewById(R.id.listViewNotifications);
				notificationList.setAdapter(da);
				notificationList.setItemsCanFocus(true);								
				notificationList.setOnItemClickListener(notificationListOnItemClickListener);
	
			}catch (Exception e) {
				if(c!=null)
					c.close();
			}finally{
				//c.close();
			}
		}
	}

	@Override
	protected void onStop() {
		// TODO Auto-generated method stub
		super.onStop();
		if(c!=null)
			c.close();
	}
	
	private OnItemClickListener notificationListOnItemClickListener= new OnItemClickListener(){

		public void onItemClick(AdapterView<?> arg0, View v, int arg2,
				long arg3) {
			//switchTabInActivity(1)
			Intent intent = new Intent();
			TextView day = (TextView) v.findViewById(R.id.textViewNotification);
			
			//todo	
		}
	};

	public void resume(){
		c.requery();
		da.notifyDataSetChanged();
	}
}
